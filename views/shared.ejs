<%- include('partials/header') %>


<% if(note && note.public) { %>
    <div class="shared-container">
        <div class="dashboard-header">
            <div class="dashboard-header-item">
                <a href="/"><span>Notes</span></a>
            </div>
            <span class="shared-user"><%=user.name%> shared this note with you</span>
        </div>
    
        
    
        <div class="shared-note-container row">
            <div class="shared-note col-lg-6 col-sm-12 <%=note.color%>"  id="<%=note._id%>">
                <div class="shared-note-title">
                    <%=note.title%>
                </div>
                <div class="shared-note-content">
                    <%=note.content%> 
                </div>

                <input id="note-editable-or-not" style="display: none;" value="<%=note.edit%>" />
                <% if(note.edit){ %>
                    <div class="shared-note-options">
                        <div class="shared-note-options-item" data-bs-toggle="modal" data-bs-target="#shared-edit-note"><i class="fas fa-edit"></i></div>
                        <div class="shared-note-options-item shared-note-options-item-themes"><i class="fas fa-palette"></i></div>
                    </div>
                <% } %>
    
                <div class="shared-note-themes" style="display: none;">
                    <div class="note-themes-item">
                        <div class="note-theme-color white" id="no-bg">
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i>
                            <i class="fas fa-tint-slash"></i>
                        </div>
                        <div class="note-theme-color blue"> 
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i> 
                        </div>
                        <div class="note-theme-color green">
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i>
                        </div>
                        <div class="note-theme-color pink">
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i>  
                        </div>
                        <div class="note-theme-color red">
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i>  
                        </div>
                        <div class="note-theme-color orange"> 
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i> 
                        </div>
                        <div class="note-theme-color yellow"> 
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i> 
                        </div>
                        <div class="note-theme-color light"> 
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i> 
                        </div>
                        <div class="note-theme-color black"> 
                            <i class="fas fa-check-circle note-color-choosed-indicator" style="display: none;"></i> 
                        </div>
                    </div> 
                    <div class="note-themes-item note-themes-item-btn-container">
                       <div class="note-themes-item-btn" id="save-theme-color">Save</div>
                       <div class="note-themes-item-btn" id="close-theme-div">Close</div>
                    </div>
                </div> 
            </div>
        </div>
    </div>
    
    
    
    <!-- modal -->
    <div class="modal fade" id="shared-edit-note" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <form action="/dashboard/editnote" method="POST">
                <div class="modal-body">
                    <textarea id="edit-note-title" class="form-control" name="title" placeholder="Title" style="height: 80px;"><%=note.title%></textarea>
                    <textarea class="form-control" name="content" placeholder="Note content" id="edit-note-content" style="height: 200px;"><%=note.content%> </textarea>
                </div>
                <input name="editnoteid" id="edit-note-id" style="display: none;" value="<%=note._id%>" />
                <input name="userId" id="edit-note-user-id" style="display: none;" value="<%=user._id%>" />
                <div class="modal-footer edit-note-footer">
                <button type="button" class="btn btn-outline-warning" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-warning edit-note-save-btn" type="submit">Save changes</button>
                </div>
                <button type="submit" id="edit-note-submit-btn" style="display: none;">Submit</button>
            </form>
        </div>
        </div>
    </div>
    
    
    <!-- change theme form -->
    <form action="/dashboard/changeColor" method="POST" style="display: none;">
        <input type="text" name="formId" class="theme-modal-formid"  value="<%=note._id%>" />
        <input type="text" name="color" class="theme-modal-color" />
        <input name="userId" id="theme-note-user-id" value="<%=user._id%>" />
        <button class="theme-modal-submit-btn" type="submit"></button>
    </form>
    
    <script src="/scripts/shared-script.js" ></script>
<% }else { %>
    <div class="shared-container">
        <div class="dashboard-header">
            <div class="dashboard-header-item">
                <a href="/"><span>Notes</span></a>
            </div>
        </div>
    
        
    
        <div class="shared-note-container row">
            <div class="no-note col-lg-6 col-sm-12">
                <div class="no-note-item no-note-emote">
                    <i class="fas fa-frown"></i>
                </div>
                <div class="no-note-item no-note-title">
                    Note not found
                </div>
                <div class="no-note-item no-note-text">
                    User has removed access of note or url is wrong
                </div>
                <div class="login-buttons no-note-item">
                    <a href="/auth/google">
                        <button type="button" class="btn btn-warning btn-lg">
                                <i class="fab fa-google"></i>
                                Sign In with Google
                        </button>
                    </a>
                    <a href="/dashboard">
                        <button type="button" class="btn btn-outline-warning btn-lg">
                            Go to Notes
                        </button>
                    </a>
                </div>
                <div class="create-account no-note-item">
                    <p>Don't have an account?</p>
                    <a href="/register">Create an account</a>
                </div> 
            </div>
        </div>
    </div>
<% } %>



<%- include('partials/footer') %>